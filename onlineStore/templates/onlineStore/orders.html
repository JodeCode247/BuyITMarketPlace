{% extends "onlineStore/base.html" %}
 
 
 {% block content %}
 

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Tailwind's gray-100 */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }


        header h1 {
            color: #1f2937; /* Tailwind's gray-800 */
            font-size: 1.875rem; /* Tailwind's text-2xl */
            font-weight: 600; /* Tailwind's font-semibold */
            margin: 0;
        }

        main {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #order-filter {
            background-color: #ffffff; /* White */
            border-radius: 0.375rem; /* Tailwind's rounded-md */
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); /* Tailwind's shadow-sm */
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
            width: 100%;
            max-width: 600px;
        }

        #order-filter label {
            color: #4b5563; /* Tailwind's gray-600 */
            font-size: 0.875rem; /* Tailwind's text-sm */
            font-weight: 500; /* Tailwind's font-medium */
            display: block;
            margin-bottom: 0.5rem;
        }

        #order-filter input[type="date"] {
            border: 1px solid #d1d5db; /* Tailwind's border-gray-300 */
            border-radius: 0.375rem; /* Tailwind's rounded-md */
            padding: 0.75rem;
            width: 100%;
            max-width: 200px;
            font-size: 1rem;
            color: #374151; /* Tailwind's gray-700 */
        }

        #order-filter input[type="date"]:focus {
            outline: none;
            border-color: #3b82f6; /* Tailwind's border-blue-500 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15); /* Tailwind's ring-blue-500 with opacity */
        }


        #order-list {
            background-color: #ffffff; /* White */
            border-radius: 0.375rem; /* Tailwind's rounded-md */
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); /* Tailwind's shadow-sm */
            padding: 1.5rem;
            width: 100%;
            max-width: 800px;
        }

        #order-list h2 {
            color: #1f2937; /* Tailwind's gray-800 */
            font-size: 1.5rem; /* Tailwind's text-xl */
            font-weight: 600; /* Tailwind's font-semibold */
            margin-bottom: 1.5rem;
            text-align: center;
        }

        #order-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #order-list li {
            border-bottom: 1px solid #e5e7eb; /* Tailwind's border-gray-200 */
            padding: 1rem 0;
        }

        #order-list li:last-child {
            border-bottom: none;
        }

        #order-list .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        #order-list .order-header span {
            color: #4b5563; /* Tailwind's gray-600 */
            font-size: 0.875rem; /* Tailwind's text-sm */
        }

        #order-list .order-items {
            margin-left: 1rem;
        }

        #order-list .order-items li {
            padding: 0.5rem 0;
            border-bottom: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #order-list .order-items li span {
            color: #6b7280;
            font-size: 1rem;
        }

        #order-list .order-total {
            margin-top: 1.5rem;
            text-align: right;
            color: #1f2937; /* Tailwind's gray-800 */
            font-size: 1.25rem; /* Tailwind's text-lg */
            font-weight: 600; /* Tailwind's font-semibold */
        }
        .no-orders{
            color: #6b7280; /* Tailwind's gray-600 */
            font-size: 1rem; /* Tailwind's text-base */
            text-align: center;
        }

        .order-details-button {
            background-color:#FF5F15; /* Green */
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;  /* Tailwind's rounded-md */
            cursor: pointer;
            font-size: 0.875rem;  /* Tailwind's text-sm */
            transition: background-color 0.3s ease;
        }

        .order-details-button:hover {
            background-color:rgb(214, 91, 20);
        }

        .order-details-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
        }

        

        @media (max-width: 640px) {
            #order-filter {
                padding: 1rem;
            }
            #order-list{
                padding: 1rem;
            }
            header h1{
                font-size: 1.5rem
            }
        }
    </style>
    

    <main>

        <div id="order-list">

            <h2>Order History</h2>
            <div id="order-filter">
                <form action="" method="post">
                    {% csrf_token %}
                <label for="filter-date">Filter by Date:</label>
                <input type="date" id="filter-date" name="filter-date">
                <button type="submit" class="order-details-button">Filter</button>
                </form>
            </div>
            <hr>
            <ul id="orders">
                {% if orders %}
                    {% for order in orders %}
                        <li>
                            <div class="order-header">
                                <span><strong> Order ID:</strong> {{ order.order_id }}</span> <p>_____</p>
                                <span><strong>Order Date:</strong> {{ order.created_at|date:"Y-m-d" }}</span>
                                <button class="order-details-button">Details</button>

                            </div>
                            <ul class="order-items" style="display: none;">
                                {% for item in order.order_items.all %}
                                    <li>
                                        <span>{{ item.product }} x {{ item.quantity }}</span>
                                        <span>₦{{ item.price }}</span>
                                
                                    </li>
                                {% endfor %}
                            </ul>
                            <p class="order-total">Total: ₦{{ order.total_amount }}</p>
                        </li>
                        <hr>
                    {% endfor %}
                {% else %}
                    <p class="no-orders">No orders found.</p>
                {% endif %}
            </ul>
        </div>
    </main>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const orderDetailsButtons = document.querySelectorAll('.order-details-button');
            orderDetailsButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const orderItemsList = button.parentElement.nextElementSibling;
                    if (orderItemsList.style.display === 'none') {
                        orderItemsList.style.display = 'block';
                    } else {
                        orderItemsList.style.display = 'none';
                    }
                });
            });

            
        });
    </script>
{% endblock content %}